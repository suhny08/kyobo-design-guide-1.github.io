<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="../css/book.css"/>
    <script src="../js/jquery-3.6.0.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"/>
    <script>
        function thumbNailDetail(){
            $(".thumbnail-box").addClass("on")
            $("body").addClass("fixed")
        }
    </script>
</head>
<body >
    <div class="wrap-contents">
        <header>
            <a href="javascript:;">
                <span><i class="fa-solid fa-arrow-left"></i></span>
            </a>
            <a href="javascript:;">
                <span><i class="fa-solid fa-house"></i></span>
            </a>
            <h3>위암으로 발전하는 위염, 위염 바로알기!</h3>
            <a href="javascript:;" class="btn-close"><span>닫기</span></a>
            <span class="bar"></span>
        </header>
        <div class="top-area">
            <a href="javascript:;" class="btn-close"><span>닫기</span></a>
        </div>
        
        <div class="top-contbox">
            <a href="javascript:;"><span>질병</span></a>
            <h1>위암으로 발전하는 위염,</h1>
           <h1> <strong>위염 바로알기!</strong></h1>
            <p class="text">
                한국인의 건강을 위협하는 위염의 종류부터<br/>
                예방법까지 알아보도록 해요!
            </p>
        </div>

        <div style="height: 5px;"></div>

        <div style="background: white; height: 320px; margin: 0 20px; border-radius: 20px;">
            <div class="detail-contbox">
                <img src="../img/1.gif" alt="이미지1">
                <h2><Strong>속이 더부룩하고 소화가 잘 안되거나<br/>
                    속 쓰림이 있으면 혹시 위염인가?</Strong>
                </h2>
                <p>
                    인구 10명 중 1명은 위염 치료를 받았어요
                </p>
            </div>
        </div>
        
        <div class="detail-contbox fademotion">
            <h2>지금부터<br/>
                다양한 위염의 종류와 증상을<br/>
                알아볼게요
            </h2>
            <div class="animation-vertical-box">
                <div class="animation-vertical"></div>
            </div>
        </div>

        <section class="mt-100 pt-100 bg-1 ">
            <span class="section-1 fademotion" id="section-1">
            <div class="title-msg ">
                <span class="section-no fw-600">1</span>
                <h2>내시경은 이상 무? '신경성 위염'</h2>                
            </div>
            <p class="text">
                내시경 상으로 이상이 없으나<br/>
                복통을 호소하는 경우 신경성 위염
            </p>
        </span>
            <div class="section-img-1 fademotion" id="section-img-1">
                <img src="../img/2.gif" alt="이미지2">
            </div>
        </section>


        <div class="bg-1" style="height: 200px;"></div>


        <section class="bg-1">
            <div class="pt-50 text-align-center">
                <span>위염이 직장인들의 만성질환이긴 하지만</span>
            </div>
            <h2 class="text-align-center"><strong class="strong-underline">
                내 건강을 돌보는건 나 뿐이라는 점을<br>
                명심하세요!
            </strong></h2>
            <div class="text-align-center pt-50">
                <span>
                    이 콘텐츠가 도움이 되었나요?
                </span>
                <div id="star-points-box" class="pt-15">
                    <img class="empty-star" src="../img/empty-star.png" width="30px">
                    <img class="painted-star display-none" src="../img/painted-star.png" width="30px">
                    <img class="empty-star" src="../img/empty-star.png" width="30px">
                    <img class="painted-star display-none" src="../img/painted-star.png" width="30px">
                    <img class="empty-star" src="../img/empty-star.png" width="30px">
                    <img class="painted-star display-none" src="../img/painted-star.png" width="30px">
                    <img class="empty-star" src="../img/empty-star.png" width="30px">
                    <img class="painted-star display-none" src="../img/painted-star.png" width="30px">
                    <img class="empty-star" src="../img/empty-star.png" width="30px">
                    <img class="painted-star display-none" src="../img/painted-star.png" width="30px">
                </div>
            </div>
            <form>
                <textarea class="pt-15" placeholder="위염에 대한 유익한 정보 감사합니다!"></textarea>
                <button class="mt-15 bg-2 fc-white" type="submit">제출하기</button>
            </form>
        </section>

        
    </div>

    
    <script>
        $(function () {

            $(".btn-close").on("click",function(){
                $(".thumbnail-box").removeClass("on")
                $("body").removeClass("fixed")
            })


            // interSectionObserver            
            const targets = document.querySelectorAll(".fademotion")            
            const observer = new IntersectionObserver(function (entries, observer) {
                entries.forEach((entry) => {
                    const container = entry.target
                    if (entry.isIntersecting) {
                        if (container.id === "section-img-1") {
                        container.classList.add("fade-in-Left")   
                        } else if(container.id === "section-1") {
                            container.classList.add("fade-in-Vis")
                        } else {
                            container.classList.add("fade-in-Down")
                        }
                    } else {
                        if (container.id === "section-img-1") {
                        container.classList.remove("fade-in-Left")
                        } else if(container.id === "section-1") {
                            container.classList.remove("fade-in-Vis")
                        } else {
                            container.classList.remove("fade-in-Down")
                        }
                    }
                })
            })

            targets.forEach((target) => {
                observer.observe(target)
            })



            var box = $("header .bar")
            function getProgressBar(){
                var sectionHeight = $(".wrap-contents").height()
                var scrollHeight = sectionHeight - $(window).height()
                var scrollTop = $(window).scrollTop()
                var scrollPercent = scrollTop / scrollHeight * 100
			    percentText(scrollPercent)
            }

            function percentText(scrollPercent){
                box.css({
                    width:scrollPercent+"%"
                })
            }
                            
            $(window).scroll(function () {
                if ($(this).scrollTop() > 50) {
                    $("header").addClass("active")
                } else if ( $(this).scrollTop() <= 50 ) {
                    $("header").removeClass("active")
                } else {
                    $("header").removeClass("active")
                }
            })
                
            function onClickStarPointsBox(){
                const starPointsBox = document.querySelector('#star-points-box');
                const emptyStars = [...starPointsBox.querySelectorAll('.empty-star')];
                const paintedStars = [...starPointsBox.querySelectorAll('.painted-star')];
                starPointsBox.addEventListener('click',event=>{
                    let clickedStar =
                        emptyStars.map((node,idx)=>{
                            return {idx, star:node}
                        }).filter(node=>node.star===event.target)[0];
                    clickedStar = clickedStar ||
                        paintedStars.map((node,idx)=>{
                            return {idx, star:node}
                        }).filter(node=>node.star===event.target)[0];

                    emptyStars.forEach((node,idx)=>{
                        if(idx<=clickedStar.idx) {
                            node.classList.add('display-none');
                            paintedStars[idx].classList.remove('display-none');
                        }else{
                            node.classList.remove('display-none');
                            paintedStars[idx].classList.add('display-none');
                        }
                    });
                })
            }

            function init(){
			    onClickStarPointsBox()
		    }

		    init(); 

        })

        
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver"></script>
</body>
</html>